---
// src/components/Header.astro
import HeaderLink from "./HeaderLink.astro";
---

<header class="p-4 bg-white dark:bg-neutral-900 shadow-md relative z-50 transition-colors">
    <nav class="flex items-center justify-between">
        <!-- Home Link -->
        <h2 class="text-lg block">
            <a href="/" class="text-black dark:text-white hover:text-accent">Home</a>
        </h2>

        <!-- Desktop Navigation Links -->
        <div class="hidden md:flex space-x-4 ml-auto mr-auto">
            <HeaderLink href="/about">About</HeaderLink>
            <HeaderLink href="/projects">Projects</HeaderLink>
            <HeaderLink href="/photos">Photos</HeaderLink>
            <HeaderLink href="/blog">Blog</HeaderLink>
        </div>

        <!-- Desktop Dark Mode Toggle -->
        <button
            id="theme-toggle-desktop"
            aria-label="Toggle dark mode"
            class="hidden md:block p-2 text-gray-600 dark:text-neutral-300 hover:text-black dark:hover:text-white focus:outline-none"
        >
            <!-- Sun icon (shown in dark mode) -->
            <svg
                class="w-5 h-5 hidden dark:block"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                ></path>
            </svg>
            <!-- Moon icon (shown in light mode) -->
            <svg
                class="w-5 h-5 block dark:hidden"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                ></path>
            </svg>
        </button>

        <!-- Mobile: Theme Toggle + Hamburger Menu -->
        <div class="flex md:hidden items-center gap-2 ml-auto">
            <!-- Mobile Dark Mode Toggle -->
            <button
                id="theme-toggle-mobile"
                aria-label="Toggle dark mode"
                class="p-2 text-gray-600 dark:text-neutral-300 hover:text-black dark:hover:text-white focus:outline-none"
            >
                <!-- Sun icon (shown in dark mode) -->
                <svg
                    class="w-5 h-5 hidden dark:block"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                    ></path>
                </svg>
                <!-- Moon icon (shown in light mode) -->
                <svg
                    class="w-5 h-5 block dark:hidden"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                    ></path>
                </svg>
            </button>

            <!-- Hamburger Menu Button -->
            <button
                id="menu-toggle"
                aria-label="Toggle navigation menu"
                class="text-black dark:text-white hover:text-accent focus:outline-none"
            >
                <svg
                    class="w-6 h-6"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>

            <!-- Mobile Menu Dropdown -->
            <div
                id="mobile-menu"
                class="hidden absolute top-full right-4 w-48 bg-white dark:bg-neutral-800 shadow-md rounded-lg z-50"
            >
                <ul class="flex flex-col space-y-2 p-4">
                    <li>
                        <HeaderLink href="/about">About</HeaderLink>
                    </li>
                    <li>
                        <HeaderLink href="/projects">Projects</HeaderLink>
                    </li>
                    <li>
                        <HeaderLink href="/photos">Photos</HeaderLink>
                    </li>
                    <li>
                        <HeaderLink href="/blog">Blog</HeaderLink>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<script>
    function initTheme() {
        const theme = localStorage.getItem("theme") || "dark";
        if (theme === "dark") {
            document.documentElement.classList.add("dark");
        } else {
            document.documentElement.classList.remove("dark");
        }
    }

    function toggleTheme() {
        const isDark = document.documentElement.classList.toggle("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    // Initialize theme immediately
    initTheme();

    document.addEventListener("DOMContentLoaded", () => {
        // Mobile menu toggle
        const menuToggle = document.getElementById("menu-toggle");
        const menu = document.getElementById("mobile-menu");

        if (menuToggle && menu) {
            menuToggle.addEventListener("click", () => {
                menu.classList.toggle("hidden");
            });
        }

        // Theme toggles
        const themeToggleDesktop = document.getElementById("theme-toggle-desktop");
        const themeToggleMobile = document.getElementById("theme-toggle-mobile");

        themeToggleDesktop?.addEventListener("click", toggleTheme);
        themeToggleMobile?.addEventListener("click", toggleTheme);
    });
</script>
